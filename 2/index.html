<!DOCTYPE html>
<html>
<head>
	<title></title>
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8"> 
</head>
<body>
    <div class='wrapper'>
<!--     	<button class='like-btn'>
    		<span class='like-text'>点赞</span>
    		<span>~</span>
    	</button> -->
    </div>

</body>
 <script type="text/javascript">
    const createDOMFromString = (domString) =>{
    	const div = document.createElement('div')
    	div.innerHTML = domString
    	return div
    }
    class LikeButton{
    	constructor(){
    		this.state = {isLike:false}
    	}
    	setState(state){
    		// this.state = state
    		// this.el = this.render()
    		// alert(this.state.isLiked)
    		const oldEl = this.el
    		this.state = state
    		this.el = this.render()
    		if(this.onStateChange){
    			this.onStateChange(oldEl,this.el)
    		}
    	}
    	changeLikeText(){
    		this.setState({
    			isLiked: !this.state.isLiked
    			})
    	}
    	render(){
    		this.el = createDOMFromString(
    			`
             <button class='like-btn'>
    		  <span class='like-text'>${this.state.isLiked ? '取消' : '点赞'}</span>
    		  <span>~</span>
    	     </button>`
    			)
    		 this.el.addEventListener('click',this.changeLikeText.bind(this),false)
    		 return this.el;
    	}
    }

    const wrapper = document.querySelector('.wrapper')
    const likeButton = new LikeButton()
    wrapper.appendChild(likeButton.render())
    likeButton.onStateChange = (oldEl,newEl) =>{
    	wrapper.insertBefore(newEl,oldEl)
    	wrapper.removeChild(oldEl)
    }


    // const likeButton1 = new LikeButton()
    // wrapper.appendChild(likeButton1.render())

    // const likeButton2 = new LikeButton()
    // wrapper.appendChild(likeButton2.render()





    // const wrapper = document.querySelector('.wrapper')
    // const likeButton1 = new LikeButton()
    // wrapper.innerHTML = likeButton1.render()
    // const likeButton2 = new LikeButton()
    // wrapper.innerHTML += likeButton2.render()

 //    const button = document.querySelector('.like-btn');
	// const buttonText = button.querySelector('.like-text');
	// let isLiked = false;
	// button.addEventListener('click',()=>{
	// 	isLiked = !isLiked;
	// 	if(isLiked){
	// 		buttonText.innerHTML = '取消';
	// 	}else{
	// 		buttonText.innerHTML = '点赞';
	// 	}
	// },false)
 </script>
</html>